<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>TMA Shop</title>
  <link rel="icon" th:href="@{/img/favicon.png}" href="../static/img/favicon.png" />
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" href="../static/css/bootstrap.min.css" />
  <!-- animate CSS -->
  <link rel="stylesheet" th:href="@{/css/animate.css}" href="../static/css/animate.css" />
  <!-- owl carousel CSS -->
  <link rel="stylesheet" th:href="@{/css/owl.carousel.min.css}" href="../static/css/owl.carousel.min.css" />
  <!-- font awesome CSS -->
  <link rel="stylesheet" th:href="@{/css/all.css}" href="../static/css/all.css" />
  <!-- flaticon CSS -->
  <link rel="stylesheet" th:href="@{/css/flaticon.css}" href="../static/css/flaticon.css" />
  <link rel="stylesheet" th:href="@{/css/themify-icons.css}" href="../static/css/themify-icons.css" />
  <!-- font awesome CSS -->
  <link rel="stylesheet" th:href="@{/css/magnific-popup.css}" href="../static/css/magnific-popup.css" />
  <!-- swiper CSS -->
  <link rel="stylesheet" th:href="@{/css/slick.css}" href="../static/css/slick.css" />
  <!-- style CSS -->
  <link rel="stylesheet" th:href="@{/css/style.css}" href="../static/css/style.css" />
  <link rel="stylesheet" th:href="@{/css/scroll.css}" href="../static/css/scroll.css" />
</head>

<body>
<!--::header part start::-->
<header class="main_menu home_menu">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-12">
        <nav class="navbar navbar-expand-lg navbar-light">
          <a class="navbar-brand" th:href="@{/}" href="index.html">
            <img th:src="@{/img/logo.png}" src="../static/img/logo.png" alt="logo" />
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                  aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="menu_icon"><i class="fas fa-bars"></i></span>
          </button>
          
          <div class="collapse navbar-collapse main-menu-item" id="navbarSupportedContent">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" th:href="@{/products}" href="productList.html">Sản
                  phẩm</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" th:href="@{/blog}" href="blog.html">Cập nhật</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" th:href="@{/about}" href="about.html">Giới thiệu</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" th:href="@{/contact}" href="contact.html">Liên hệ</a>
              </li>
            </ul>
          </div>
          <div class="hearer_icon d-flex">
            <a id="search_1" href="javascript:void(0)"><i class="ti-search"></i></a>
            <div class="cart">
              <a href="/cart">
                <i class="fas fa-cart-plus"></i>
                <span th:fragment="cart_frag"> <span id="numberCart">0</span></span>
              </a>
            </div>
            <div class="dropdown customer">
              <p id="loginout" style="color: white; display: flex; align-items:center; justify-content: center; " sec:authorize="isAnonymous()"> <a class="nav-link" href="/login">Đăng nhập</a> / <a class="nav-link" href="/register">Đăng ký</a></p>
              <a sec:authorize="isAuthenticated()" class="nav-link dropdown-toggle" href="#" id="navbarDropdown_1"
                 role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display: flex; justify-content: center; align-items: center;">
                <p style="color: white;">
                  Xin chào,
                  <span th:text="${#authentication.getPrincipal().getFullName()}"></span>
                  <span style="display: none;" id="useremail" th:text="${#authentication.getPrincipal().getEmail()}"></span>
                </p>
              </a>
              <div sec:authorize="isAuthenticated()" class="dropdown-menu" aria-labelledby="navbarDropdown_1" style="display: block; width: 220px;">
                <a th:href="@{/profile}" href="user/profile.html" class="dropdown-item">Profile</a>
                <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin}" class="dropdown-item">Quản lý</a>
                <a th:href="@{/wishlist}" href="user/wishList.html" class="dropdown-item">Sản phẩm
                  đã thích</a>
                <a th:href="@{/logout}" href="index.html" class="dropdown-item">Đăng
                  xuất</a>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </div>
  </div>
  <div class="search_input" id="search_input_box">
    <div class="container ">
      <form class="d-flex justify-content-between search-inner" th:action="@{/products/search}" th:method="get">
        <input type="text" class="form-control" id="search_input" placeholder="Tìm kiếm" th:name="keyword" th:value="${keyword}">
        <button type="submit" class="btn"></button>
        <span class="ti-close" id="close_search" title="Close Search"></span>
      </form>
    </div>
  </div>
</header>
<!-- Header part end-->

<!-- banner part start-->
<section class="banner_part">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-12">
        <div class="slider-counter slider-counter-left"></div>
        <div class="banner_slider owl-carousel">
          <div class="single_banner_slider">
            <div class="row">
              <div class="col-lg-5 col-md-8">
                <div class="banner_text">
                  <div class="banner_text_iner">
                    <!--                    <img th:src="@{productImages/slide/iphone-11-dang-ban-dat-nhu-tom-tuoi-vuot-ki-vong-cua-apple.jpg}" src="../static/productImages/slide/iphone-11-dang-ban-dat-nhu-tom-tuoi-vuot-ki-vong-cua-apple.jpg" alt="" />-->
                  </div>
                </div>
              </div>
              <div class="banner_img d-none d-lg-block">
                <img th:src="@{productImages/slide/iphone-11-dang-ban-dat-nhu-tom-tuoi-vuot-ki-vong-cua-apple.jpg}" src="../static/img/asset/slider1.png" alt="" />
              </div>
            </div>
          </div>
          
          <div class="single_banner_slider">
            <div class="row">
              <div class="col-lg-5 col-md-8">
                <div class="banner_text">
                  <div class="banner_text_iner">
                    <!--                    <img th:src="@{img/asset/slider2text.png}" src="../static/img/asset/slider2text.png" alt="" />-->
                  </div>
                </div>
              </div>
              <div class="banner_img d-none d-lg-block">
                <img th:src="@{/productImages/slide/06CJvxkMlTUXI1Xp5A2AkfZ-1.fit_lim.v1644407856.jpg}" src="../static/productImages/slide/06CJvxkMlTUXI1Xp5A2AkfZ-1.fit_lim.v1644407856.jpg"alt="" />
              </div>
            </div>
          </div>
          
          <div class="single_banner_slider">
            <div class="row">
              <div class="col-lg-5 col-md-8">
                <div class="banner_text">
                  <div class="banner_text_iner">
                    <!--                    <img th:src="@{img/asset/slider3text.png}" src="../static/img/asset/slider3text.png" alt="" />-->
                  </div>
                </div>
              </div>
              <div class="banner_img d-none d-lg-block">
                <img th:src="@{productImages/slide/96c13f20-7206-11ec-bb9f-080ee9a16131.jpg}" src="../static/productImages/slide/96c13f20-7206-11ec-bb9f-080ee9a16131.jpg" alt="" />
              </div>
            </div>
          </div>
          
          <div class="single_banner_slider">
            <div class="row">
              <div class="col-lg-5 col-md-8">
                <div class="banner_text">
                  <div class="banner_text_iner">
                    <!--                    <img th:src="@{img/asset/slider4text.png}" src="../static/img/asset/slider4text.png" alt="" />-->
                  </div>
                </div>
              </div>
              <div class="banner_img d-none d-lg-block">
                <img th:src="@{/productImages/slide/Samsung-Galaxy-Z-Flip-3-5G.webp}" src="../static/productImages/slide/Samsung-Galaxy-Z-Flip-3-5G.webp" alt="" />
              </div>
            </div>
          </div>
          
          <div class="single_banner_slider">
            <div class="row">
              <div class="col-lg-5 col-md-8">
                <div class="banner_text">
                  <div class="banner_text_iner">
                    <!--                    <img th:src="@{img/asset/slider5text.png}" src="../static/img/asset/slider5text.png" alt="" />-->
                  </div>
                </div>
              </div>
              <div class="banner_img d-none d-lg-block">
                <img th:src="@{/productImages/slide/Galaxy-S22-S22-pr_main1.jpg}" src="../static/productImages/slide/Galaxy-S22-S22-pr_main1.jpg" alt="" />
              </div>
            </div>
          </div>
        </div>
        <div class="slider-counter slider-counter-right"></div>
      </div>
    </div>
  </div>
</section>
<!-- banner part start-->

<!-- feature_part start-->
<section class="feature_part padding_top">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="section_tittle text-center">
          <h2>Featured Genres</h2>
        </div>
      </div>
    </div>
    <div class="row align-items-center justify-content-between">
      <div class="col-lg-7 col-sm-6">
        <div class="single_feature_post_text">
          <p>Premium Quality</p>
          <h3>Manga</h3>
          <a th:href="@{/products/search?keyword=iphone}" href="productList.html" class="feature_btn">EXPLORE NOW <i
            class="fas fa-play"></i></a>
          <img th:src="@{/productImages/compare_iphone_13__fqzwhmfmroey_medium_2x.jpg}" src="../static/productImages/compare_iphone_13__fqzwhmfmroey_medium_2x.jpg" alt="" />
        </div>
      </div>
      <div class="col-lg-5 col-sm-6">
        <div class="single_feature_post_text">
          <p>Premium Quality</p>
          <h3>Manhua</h3>
          <a th:href="@{/category/manhua/20}" href="productList.html" class="feature_btn">EXPLORE NOW <i
            class="fas fa-play"></i></a>
          <img th:src="@{/productImages/samsungS23.jpg}" src="../static/productImages/samsungS23.jpg" alt="" />
        </div>
      </div>
      <div class="col-lg-5 col-sm-6">
        <div class="single_feature_post_text">
          <p>Premium Quality</p>
          <h3>Manhwa</h3>
          <a th:href="@{/category/manhwa/21}" href="productList.html" class="feature_btn">EXPLORE NOW <i
            class="fas fa-play"></i></a>
          <img th:src="@{/productImages/opa95.webp}" src="../static/productImages/opa95.webp" alt="" />
        </div>
      </div>
      <div class="col-lg-7 col-sm-6">
        <div class="single_feature_post_text">
          <p>Premium Quality</p>
          <h3>Comic</h3>
          <a th:href="@{/category/comic/6}" href="category.html" class="feature_btn">EXPLORE NOW <i
            class="fas fa-play"></i></a>
          <img th:src="@{/productImages/vivo-y53s-xanh-600x600.jpg}" src="../static/productImages/vivo-y53s-xanh-600x600.jpg" alt="" />
        </div>
      </div>
    </div>
  </div>
</section>
<!-- upcoming_event part start-->

<!-- product_list start-->
<section class="product_list section_padding">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-12">
        <div class="section_tittle text-center">
          <h2>Hot <span>shop</span></h2>
        </div>
      </div>
    </div>
    <div class="row align-items-center justify-content-between">
      <div class="col-lg-12">
        <div class="best_product_slider owl-carousel">
          <th:block th:each="product:${productList}">
            <div class="single_product_item">
              <a href="#abc"><img th:src="@{${'/productImages/'+product.getImage()}}" src="../static/img/offer_img.jpg" alt="" /></a>
              <div class="single_product_text">
                <a href="#abc">
                  <h4 th:text="${product.getName()}">Quartz Belt Watch</h4>
                </a>
                <a href="#abc">
                  <h3 th:text="${product.getPrice()}">$150.00</h3>
                </a>
                <a href="#" class="add_cart">+ add to cart<i class="ti-heart"></i></a>
              </div>
            </div>
          </th:block>
        
        
        
        </div>
      </div>
    </div>
  </div>
</section>
<!-- product_list part start-->

<!-- awesome_shop start-->
<section class="our_offer section_padding">
  <div class="container">
    <div class="row align-items-center justify-content-between">
      <div class="col-lg-6 col-md-6">
        <div class="offer_img">
          <img th:src="@{/productImages/iphone-13-pro-max-gold-650x650.png}" src="../static/productImages/iphone-13-pro-max-gold-650x650.png" alt="" />
        </div>
      </div>
      <div class="col-lg-6 col-md-6">
        <div class="offer_text">
          <h2>Weekly Sale Off 60%</h2>
          <div class="date_countdown">
            <div id="timer">
              <div id="days" class="date"></div>
              <div id="hours" class="date"></div>
              <div id="minutes" class="date"></div>
              <div id="seconds" class="date"></div>
            </div>
          </div>
          <div class="input-group">
            <input type="text" class="form-control" placeholder="enter email address"
                   aria-label="Recipient's username" aria-describedby="basic-addon2" />
            <div class="input-group-append">
              <a href="#" class="input-group-text btn_2" id="basic-addon2">book now</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- awesome_shop part start-->

<!-- product_list part start-->
<!-- product_list part end-->

<!--::footer_part start::-->
<footer class="footer_part">
  <div class="copyright_part">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <div class="copyright_text">
            <p>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
              Copyright &copy;
              <script>
                document.write(new Date().getFullYear());
              </script>
              All rights reserved | This template is used with
              <i class="ti-heart" aria-hidden="true"></i> by
              <a href="https://www.facebook.com/tung.buivan.sfer.11235/" target="_blank">Tungsfer</a>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="footer_icon social_icon">
            <ul class="list-unstyled">
              <li>
                <a href="#" class="single_social_icon"><i class="fab fa-facebook-f"></i></a>
              </li>
              <li>
                <a href="#" class="single_social_icon"><i class="fab fa-twitter"></i></a>
              </li>
              <li>
                <a href="#" class="single_social_icon"><i class="fas fa-globe"></i></a>
              </li>
              <li>
                <a href="#" class="single_social_icon"><i class="fab fa-behance"></i></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
<!--::footer_part end::-->

<!-- jquery plugins here-->
<script th:src="@{/js/jquery-1.12.1.min.js}" src="../static/js/jquery-1.12.1.min.js"></script>
<!-- popper js -->
<script th:src="@{/js/popper.min.js}" src="../static/js/popper.min.js"></script>
<!-- bootstrap js -->
<script th:src="@{/js/bootstrap.min.js}" src="../static/js/bootstrap.min.js"></script>
<!-- easing js -->
<script th:src="@{/js/jquery.magnific-popup.js}" src="../static/js/jquery.magnific-popup.js"></script>
<!-- swiper js -->
<script th:src="@{/js/swiper.min.js}" src="../static/js/swiper.min.js"></script>
<!-- swiper js -->
<script th:src="@{/js/masonry.pkgd.js}" src="../static/js/masonry.pkgd.js"></script>
<!-- particles js -->
<script th:src="@{/js/owl.carousel.min.js}" src="../static/js/owl.carousel.min.js"></script>
<script th:src="@{/js/jquery.nice-select.min.js}" src="../static/js/jquery.nice-select.min.js"></script>
<!-- slick js -->
<script th:src="@{/js/slick.min.js}" src="../static/js/slick.min.js"></script>
<script th:src="@{/js/jquery.counterup.min.js}" src="../static/js/jquery.counterup.min.js"></script>
<script th:src="@{/js/waypoints.min.js}" src="../static/js/waypoints.min.js"></script>
<script th:src="@{/js/contact.js}" src="../static/js/contact.js"></script>
<script th:src="@{/js/jquery.ajaxchimp.min.js}" src="../static/js/jquery.ajaxchimp.min.js"></script>
<script th:src="@{/js/jquery.form.js}" src="../static/js/jquery.form.js"></script>
<script th:src="@{/js/jquery.validate.min.js}" src="../static/js/jquery.validate.min.js"></script>
<script th:src="@{/js/mail-script.js}" src="../static/js/mail-script.js"></script>
<!-- custom js -->
<script th:src="@{/js/custom.js}" src="../static/js/custom.js"></script>
<script>
  $("document").ready(function () {
    var user_id ;
    var user_email = $("#useremail").text();
    console.log(user_email);
    $.get("/apis/getUserIdByEmail/" + user_email ).done(function (xxxid) {
      user_id = xxxid;
      console.log(user_id);
      if($("#loginout").length > 0) {
        console.log("not login");
      } else {
        console.log("login");
        $.get("/apis/countcart/" + user_id).done(function (fragment) {
          console.log(fragment);
          $("#numberCart").html(fragment);
        });
      }
      $(".addToWishList").click(function (e){
        var product_id = e.target.parentElement.firstElementChild.textContent;
        $.post("/addToWishList/" + product_id).done(function () {
          alert("đã thêm vào danh sách yêu thích");
        });
      });
      $(".clickme").click(function (e) {
        console.log(e.target);
        var product_id = e.target.parentElement.firstElementChild.textContent;
        console.log(product_id);
        $.post("/addToCart/" + product_id).done(function (fragment) {
          console.log(fragment);
          $.get("/apis/countcart/" + user_id).done(function (fragment) {
            console.log(fragment);
            $("#numberCart").html(fragment);
          });
        });
      });
    });
  });
</script>
<script src="https://apps.elfsight.com/p/platform.js" defer></script>
<div class="elfsight-app-6b7c4476-cba7-4d7f-b0ef-dc55634740e3"></div>
</body>

</html>